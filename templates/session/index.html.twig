
{% extends 'base.html.twig' %}

{% block title %}Liste des sessions{% endblock %}

{% block body %}
<style>
body {
    background: #121212;
    color: #ffffff;
    font-family: 'Segoe UI', sans-serif;
}

.nk-title {
    font-size: 3em;
    font-weight: 700;
    color: #fff;
    margin-bottom: 0.2em;
}

.nk-sub-title {
    color: #ccc;
    font-size: 1.2em;
    margin-bottom: 2em;
}

.nk-form .form-control {
    background: #1e1e1e;
    border: 1px solid #333;
    color: #fff;
}

.nk-btn {
    background: #dd163b;
    border: none;
    color: white;
    font-weight: 600;
    padding: 0.6em 1.2em;
    border-radius: 8px;
    transition: background 0.3s ease;
}

.nk-btn:hover {
    background: #ff4d6d;
}

.nk-btn-color-main-5 {
    background: #333;
}

.nk-btn-color-main-5:hover {
    background: #555;
}

/* Carrousel horizontal */
.carousel-wrapper {
    position: relative;
}

.session-carousel {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    gap: 20px;
    padding-bottom: 10px;
    scrollbar-width: none;
}

.session-carousel::-webkit-scrollbar {
    display: none;
}

/* Carte session */
.session-card {
    flex: 0 0 auto;
    width: 280px;
    background: #1a1a1a;
    border-radius: 12px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
    box-shadow: 0 10px 20px rgba(0,0,0,0.4);
}

.session-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.5);
}

.session-card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    filter: brightness(0.85);
}

.session-info {
    padding: 20px;
}

.session-title {
    font-size: 1.4em;
    margin-bottom: 10px;
    color: #fff;
}

.session-price {
    font-size: 1.2em;
    color: #dd163b;
    font-weight: bold;
    margin-bottom: 10px;
}

.session-meta {
    font-size: 0.9em;
    color: #aaa;
    margin-bottom: 5px;
}

/* Flèches */
.carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.7);
    border: none;
    color: white;
    font-size: 1.5em;
    padding: 10px 15px;
    z-index: 10;
    cursor: pointer;
    border-radius: 50%;
}

.carousel-arrow.left {
    left: -10px;
}

.carousel-arrow.right {
    right: -10px;
}

.navigation-buttons {
    margin-top: 40px;
}
</style>

<div class="nk-main">
    <div class="nk-gap-2"></div>
    <div class="container">
        <div class="nk-gap-2"></div>
        <h1 class="nk-title text-center">Liste des sessions</h1>
        <h3 class="nk-sub-title text-center mb-30">Gérez vos sessions de jeux</h3>

        <!-- Formulaire de recherche -->
        <form method="get" class="nk-form nk-form-style-1 mb-50">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="input-group">
                        <input type="text" name="search" class="form-control required" placeholder="Rechercher par nom du jeu..." value="{{ searchQuery }}">
                        <button type="submit" class="nk-btn nk-btn-rounded ml-2">Rechercher</button>
                    </div>
                </div>
            </div>
        </form>

        <!-- Boutons d'action -->
        <div class="text-center mb-30">
            <a href="{{ path('session_add') }}" class="nk-btn nk-btn-rounded">Ajouter une session</a>
            <a href="{{ path('coach_reservations') }}" class="nk-btn nk-btn-rounded">Voir les réservations</a>
        </div>

        <!-- Carrousel des sessions -->
        <div class="carousel-wrapper mt-4">
            <button class="carousel-arrow left" onclick="scrollCarousel(-1)">❮</button>
            <div class="session-carousel" id="sessionCarousel">
                {% for session in sessions %}
                    <div class="session-card">
                        {% if session.imageName %}
                            <img src="{{ image_base_url ~ session.imageName }}" alt="{{ session.game }}">
                        {% endif %}
                        <div class="session-info">
                            <div class="session-title">{{ session.game }}</div>
                            <div class="session-price">{{ session.prix }} DT</div>
                            <div class="session-meta"><i class="far fa-clock"></i> {{ session.dureeSession }} min</div>
                            <div class="d-flex gap-2 mt-3">
                                <a href="{{ path('session_edit', {'id': session.id}) }}" class="nk-btn nk-btn-rounded">Modifier</a>
                                <form method="post" action="{{ path('session_delete', {'id': session.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette session?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ session.id) }}">
                                    <button type="submit" class="nk-btn nk-btn-rounded nk-btn-color-main-5">Supprimer</button>
                                </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <button class="carousel-arrow right" onclick="scrollCarousel(1)">❯</button>
        </div>
    </div>
</div>

<img class="nk-page-background-top" src="{{ asset('images/bg-top.png') }}" alt="">
<img class="nk-page-background-bottom" src="{{ asset('images/bg-bottom.png') }}" alt="">

<script>
function scrollCarousel(direction) {
    const carousel = document.getElementById('sessionCarousel');
    const scrollAmount = 300;
    carousel.scrollBy({
        left: direction * scrollAmount,
        behavior: 'smooth'
    });
}
</script>
{% endblock %}
